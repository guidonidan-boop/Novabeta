<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova (beta) - Analisi di Sostenibilità Digitale</title>
    <meta name="description" content="Un assistente AI per calcolare l'impatto ambientale, l'accessibilità e la sostenibilità economica dei contenuti digitali.">

    <style>
        /* Tailwind CSS v3.4.1 | MIT License | https://tailwindcss.com - Pre-compiled for production */
        *,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / .5 );--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}body{margin:0;line-height:inherit}h1,h2,h3,h4,p{margin:0}a{color:inherit;text-decoration:inherit}button{cursor:pointer}button,input{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}[type=file]{-webkit-appearance:button;background-color:initial;background-image:initial;text-transform:none}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}img{display:block;vertical-align:middle;max-width:100%;height:auto}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.top-4{top:4}.right-4{right:1rem}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:.25rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mr-2{margin-right:.5rem}.mr-4{margin-right:1rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-16{height:4rem}.h-20{height:5rem}.h-24{height:6rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-full{height:100%}.min-h-screen{min-height:100vh}.w-16{width:4rem}.w-20{width:5rem}.w-24{width:6rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.flex-grow{flex-grow:1}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-y-auto{overflow-y:auto}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border-2{border-width:2px}.border-4{border-width:4px}.border{border-width:1px}.border-dashed{border-style:dashed}.border-t-transparent{border-top-color:transparent}.border-\[\#96E6B3\]{--tw-border-opacity:1;border-color:rgb(150 230 179 / var(--tw-border-opacity))}.border-red-500{--tw-border-opacity:1;border-color:rgb(239 68 68 / var(--tw-border-opacity))}.border-white\/20{border-color:rgb(255 255 255 / .2)}.border-white\/30{border-color:rgb(255 255 255 / .3)}.border-white\/40{border-color:rgb(255 255 255 / .4)}.bg-\[\#1F3B2C\]{--tw-bg-opacity:1;background-color:rgb(31 59 44 / var(--tw-bg-opacity))}.bg-\[\#2a4a3a\]\/50{background-color:rgb(42 74 58 / .5)}.bg-\[\#96E6B3\]{--tw-bg-opacity:1;background-color:rgb(150 230 179 / var(--tw-bg-opacity))}.bg-black\/70{background-color:rgb(0 0 0 / .7)}.bg-red-900\/50{background-color:rgb(127 29 29 / .5)}.bg-white\/10{background-color:rgb(255 255 255 / .1)}.bg-white\/5{background-color:rgb(255 255 255 / .05)}.bg-white\/20{background-color:rgb(255 255 255 / .2)}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.text-center{text-align:center}.text-left{text-align:left}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-light{font-weight:300}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-\[\#1F3B2C\]{--tw-text-opacity:1;color:rgb(31 59 44 / var(--tw-text-opacity))}.text-\[\#96E6B3\]{--tw-text-opacity:1;color:rgb(150 230 179 / var(--tw-text-opacity))}.text-red-300{--tw-text-opacity:1;color:rgb(252 165 165 / var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-white\/60{color:rgb(255 255 255 / .6)}.text-white\/70{color:rgb(255 255 255 / .7)}.text-white\/80{color:rgb(255 255 255 / .8)}.text-white\/90{color:rgb(255 255 255 / .9)}.opacity-0{opacity:0}.underline{text-decoration-line:underline}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-300{transition-duration:.3s}.list-disc{list-style-type:disc}.list-inside{list-style-position:inside}.hover\:border-\[\#96E6B3\]:hover{--tw-border-opacity:1;border-color:rgb(150 230 179 / var(--tw-border-opacity))}.hover\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.hover\:bg-white\/5:hover{background-color:rgb(255 255 255 / .05)}.hover\:text-\[\#96E6B3\]:hover{--tw-text-opacity:1;color:rgb(150 230 179 / var(--tw-text-opacity))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}@media(min-width:640px){.sm\:p-6{padding:1.5rem}.sm\:text-left{text-align:left}.sm\:flex-row{flex-direction:row}.sm\:items-center{align-items:center}.sm\:mt-0{margin-top:0}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media(min-width:768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media(min-width:1024px){.lg\:p-8{padding:2rem}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}}
        
        /* Custom styles */
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
        .drag-active { border-color: #96E6B3 !important; background-color: #2a4a3a !important; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @media print { body { background: white !important; color: black !important; } .no-print { display: none !important; } }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1F3B2C; }
        ::-webkit-scrollbar-thumb { background-color: #96E6B3; border-radius: 4px; }
        .object-cover { object-fit: cover; }
        .max-h-\[90vh\] { max-height: 90vh; }
        
        /* Info button styling - clean white icon */
        .info-btn { 
            cursor: pointer; 
            opacity: 0.6; 
            transition: opacity 0.2s ease;
            color: white;
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            font-size: inherit;
            line-height: inherit;
        }
        .info-btn:hover { 
            opacity: 1; 
        }
        
        /* Beta badge styling */
        .beta-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 0.75rem;
            font-weight: 400;
            margin-left: 8px;
            vertical-align: middle;
        }
        
        /* File preview sticky positioning */
        .file-preview-sticky {
            position: sticky;
            top: 20px;
            z-index: 20;
            background: rgba(31, 59, 44, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Consistent box spacing */
        .analysis-box {
            margin-bottom: 1.5rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
        }
        
        /* Minimal icons */
        .icon-check {
            color: #96E6B3;
            font-weight: bold;
        }
        .icon-cross {
            color: white;
            font-weight: normal;
        }
        .icon-neutral {
            color: #fbbf24;
            font-weight: normal;
        }
        
        /* Color swatch styling */
        .color-swatch {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Improved spacing for boxes */
        .metric-box {
            padding: 1.25rem;
        }
        
        .recommendation-box {
            padding: 1.25rem;
        }
        
        /* Canvas per analisi colore */
        #color-analysis-canvas {
            display: none;
        }
        
        /* Clean delete button styling - no background box */
        .delete-btn {
            color: white;
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .delete-btn:hover {
            opacity: 1;
        }
        
        /* Clean menu button styling - white text, no background */
        .menu-btn {
            color: white !important;
            background: none !important;
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
            cursor: pointer;
            transition: color 0.2s ease;
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            outline: none;
            box-shadow: none;
        }
        .menu-btn:hover {
            color: #96E6B3 !important;
        }
        .menu-btn:focus {
            outline: none;
            box-shadow: none;
        }

        /* Modal close button styling */
        .modal-close-btn {
            color: white;
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease;
            font-size: 2rem;
            line-height: 1;
        }
        .modal-close-btn:hover {
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen bg-[#1F3B2C] text-white">
    <div id="app"></div>
    <canvas id="color-analysis-canvas"></canvas>

    <script>
        class NovaSustainabilityAnalyzer {
            constructor() {
                this.uploadedFile = null;
                this.analysisResults = null;
                this.isAnalyzing = false;
                this.error = null;
                this.activeModal = null;
                this.colorAnalysisData = null;
                this.currentView = 'main'; // 'main' or 'discover-more'
                this.init();
                window.novaApp = this; // Espongo l'istanza globalmente
            }

            init() {
                this.render();
                this.attachEventListeners();
            }

            attachEventListeners() {
                const appContainer = document.getElementById('app');
                
                // File upload events
                appContainer.addEventListener('change', e => {
                    if (e.target.id === 'file-upload') this.handleFileInput(e);
                });
                
                // Drag and drop events
                appContainer.addEventListener('dragenter', e => {
                    if (e.target.closest('#upload-area')) this.handleDrag(e, true);
                });
                appContainer.addEventListener('dragover', e => {
                    if (e.target.closest('#upload-area')) this.handleDrag(e, true);
                });
                appContainer.addEventListener('dragleave', e => {
                    if (e.target.closest('#upload-area')) this.handleDrag(e, false);
                });
                appContainer.addEventListener('drop', e => {
                    if (e.target.closest('#upload-area')) this.handleDrop(e);
                });

                // Button clicks
                appContainer.addEventListener('click', e => {
                    if (e.target.closest('#analyze-btn')) this.analyzeFile();
                    if (e.target.closest('#remove-btn')) this.removeFile();
                    if (e.target.closest('#new-analysis-btn')) this.startNewAnalysis();
                    if (e.target.closest('#new-analysis-menu-btn')) this.startNewAnalysis();
                    if (e.target.closest('#discover-more-btn')) this.showDiscoverMore();
                    if (e.target.closest('#download-cert-btn')) this.downloadCertificate();
                    
                    const infoButton = e.target.closest('.info-btn');
                    if (infoButton) {
                        e.preventDefault();
                        this.showModal(infoButton.dataset.modal);
                    }
                });

                // Modal events
                document.body.addEventListener('click', e => {
                    if (e.target.classList.contains('modal-close-btn') || e.target.id === 'modal-backdrop') {
                        this.hideModal();
                    }
                });
                
                document.addEventListener('keydown', e => {
                    if (e.key === "Escape") this.hideModal();
                });
            }

            handleDrag(e, isActive) {
                e.preventDefault();
                e.stopPropagation();
                const uploadArea = document.getElementById('upload-area');
                if (uploadArea) {
                    uploadArea.classList.toggle('drag-active', isActive);
                }
            }

            handleDrop(e) {
                this.handleDrag(e, false);
                if (e.dataTransfer.files && e.dataTransfer.files[0]) {
                    this.handleFile(e.dataTransfer.files[0]);
                }
            }

            handleFileInput(e) {
                if (e.target.files && e.target.files[0]) {
                    this.handleFile(e.target.files[0]);
                }
            }

            handleFile(file) {
                this.error = null;
                const validTypes = ['image/jpeg', 'image/png', 'image/webp', 'image/svg+xml', 'application/pdf'];
                
                if (!validTypes.includes(file.type)) {
                    this.error = 'Formato file non supportato. Usa JPG, PNG, WebP, SVG o PDF.';
                    this.render();
                    return;
                }
                
                if (file.size > 15 * 1024 * 1024) {
                    this.error = 'File troppo grande. Dimensione massima: 15MB.';
                    this.render();
                    return;
                }

                const reader = new FileReader();
                reader.onload = e => {
                    this.uploadedFile = {
                        name: file.name,
                        size: file.size,
                        type: file.type,
                        url: e.target.result
                    };
                    this.analysisResults = null;
                    this.colorAnalysisData = null;
                    this.render();
                };
                reader.onerror = () => {
                    this.error = 'Errore durante la lettura del file.';
                    this.render();
                };
                reader.readAsDataURL(file);
            }

            removeFile() {
                this.uploadedFile = null;
                this.analysisResults = null;
                this.error = null;
                this.colorAnalysisData = null;
                this.render();
            }

            showDiscoverMore() {
                this.currentView = 'discover-more';
                this.render();
            }

            startNewAnalysis() {
                this.uploadedFile = null;
                this.analysisResults = null;
                this.isAnalyzing = false;
                this.error = null;
                this.currentView = 'main';
                this.render();
            }

            // Analisi avanzata dei colori dell'immagine
            analyzeImageColors() {
                return new Promise((resolve) => {
                    if (!this.uploadedFile || !this.uploadedFile.type.startsWith('image/')) {
                        resolve({
                            dominantColors: ['#FFFFFF', '#000000'],
                            contrastRatio: 21.0,
                            averageBrightness: 0.5,
                            hasGoodContrast: true
                        });
                        return;
                    }

                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.getElementById('color-analysis-canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // Ridimensiona per analisi più veloce
                        const maxSize = 200;
                        const scale = Math.min(maxSize / img.width, maxSize / img.height);
                        canvas.width = img.width * scale;
                        canvas.height = img.height * scale;
                        
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const data = imageData.data;
                        
                        const colorCounts = {};
                        let totalBrightness = 0;
                        let pixelCount = 0;
                        
                        // Analizza ogni pixel
                        for (let i = 0; i < data.length; i += 4) {
                            const r = data[i];
                            const g = data[i + 1];
                            const b = data[i + 2];
                            const a = data[i + 3];
                            
                            if (a < 128) continue; // Skip pixels trasparenti
                            
                            // Calcola luminosità
                            const brightness = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
                            totalBrightness += brightness;
                            pixelCount++;
                            
                            // Raggruppa colori simili
                            const colorKey = `${Math.round(r/32)*32},${Math.round(g/32)*32},${Math.round(b/32)*32}`;
                            colorCounts[colorKey] = (colorCounts[colorKey] || 0) + 1;
                        }
                        
                        // Trova i colori dominanti
                        const sortedColors = Object.entries(colorCounts)
                            .sort(([,a], [,b]) => b - a)
                            .slice(0, 10)
                            .map(([color]) => {
                                const [r, g, b] = color.split(',').map(Number);
                                return { r, g, b, hex: `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}` };
                            });
                        
                        const averageBrightness = totalBrightness / pixelCount;
                        
                        // Calcola contrasto tra i due colori più dominanti
                        let contrastRatio = 1.0;
                        let hasGoodContrast = false;
                        
                        if (sortedColors.length >= 2) {
                            // Identifica il colore più scuro e il più chiaro tra i dominanti
                            let darkestDominant = sortedColors[0];
                            let lightestDominant = sortedColors[0];

                            for (let i = 1; i < sortedColors.length; i++) {
                                const currentColor = sortedColors[i];
                                const currentLum = this.calculateLuminance(currentColor.r, currentColor.g, currentColor.b);
                                if (currentLum < this.calculateLuminance(darkestDominant.r, darkestDominant.g, darkestDominant.b)) {
                                    darkestDominant = currentColor;
                                }
                                if (currentLum > this.calculateLuminance(lightestDominant.r, lightestDominant.g, lightestDominant.b)) {
                                    lightestDominant = currentColor;
                                }
                            }
                            
                            const lum1 = this.calculateLuminance(lightestDominant.r, lightestDominant.g, lightestDominant.b);
                            const lum2 = this.calculateLuminance(darkestDominant.r, darkestDominant.g, darkestDominant.b);
                            
                            contrastRatio = (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);
                            hasGoodContrast = contrastRatio >= 4.5;
                        }
                        
                        resolve({
                            dominantColors: sortedColors.map(c => c.hex),
                            contrastRatio: Math.round(contrastRatio * 100) / 100,
                            averageBrightness,
                            hasGoodContrast,
                            totalPixels: pixelCount
                        });
                    };
                    
                    img.onerror = () => {
                        resolve({
                            dominantColors: ['#FFFFFF', '#000000'],
                            contrastRatio: 7.0,
                            averageBrightness: 0.5,
                            hasGoodContrast: true
                        });
                    };
                    
                    img.src = this.uploadedFile.url;
                });
            }
            
            calculateLumin
